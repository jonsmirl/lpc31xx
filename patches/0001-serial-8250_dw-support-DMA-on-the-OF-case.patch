Bottom: a6bcbfe54661a23aed6b07319bff463f74896af8
Top:    e0d5eb3f0f271556b1a309117b8ae03ef16f1b4b
Author: =?UTF-8?q?Emilio=20L=C3=B3pez?= <emilio@elopez.com.ar>
Date:   2014-06-08 23:51:56 -0300

From fdb67f1695f0f516192a2cff2e7842ca191e158e Mon Sep 17 00:00:00 2001
Subject: [PATCH 1/6] serial: 8250_dw: support DMA on the OF case
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Currently, DMA properties on the DT are ignored when using the 8250_dw
driver. With this patch, DMA will be used when available.

Signed-off-by: Emilio LÃ³pez <emilio@elopez.com.ar>


---

diff --git a/drivers/tty/serial/8250/8250_dw.c b/drivers/tty/serial/8250/8250_dw.c
index d0c6d080..1d4f62e 100644
--- a/drivers/tty/serial/8250/8250_dw.c
+++ b/drivers/tty/serial/8250/8250_dw.c
@@ -224,6 +224,8 @@ static int dw8250_probe_of(struct uart_port *p,
 			   struct dw8250_data *data)
 {
 	struct device_node	*np = p->dev->of_node;
+	struct uart_8250_port	*up = container_of(p, struct uart_8250_port,
+						   port);
 	u32			val;
 	bool has_ucv = true;
