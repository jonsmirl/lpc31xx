Bottom: 38d1d32c021b95d5bc1e773286407b25df62d4b1
Top:    1461c6c13218e99d39868fc8b883c58a8fcaf53f
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   2012-03-23 18:21:59 -0400

Refresh of devicetree

---

diff --git a/arch/arm/mach-lpc31xx/board-ea313x.c b/arch/arm/mach-lpc31xx/board-ea313x.c
index 70c9bc4..dc0c53d 100644
--- a/arch/arm/mach-lpc31xx/board-ea313x.c
+++ b/arch/arm/mach-lpc31xx/board-ea313x.c
@@ -49,11 +49,8 @@
 #include <mach/gpio.h>
 #include <mach/i2c.h>
 #include <mach/board.h>
-<<<<<<< current
 #include <mach/system.h>
-=======
 #include <mach/dt.h>
->>>>>>> patched
 
 
 static u64 mci_dmamask = 0xffffffffUL;
@@ -678,7 +675,7 @@ DT_MACHINE_START(EA313X, "NXP EA3131 (Device Tree Support)")
 	.timer		= &lpc313x_timer,
 	.init_machine	= ea3131_dt_init,
 	.dt_compat	= ea3131_dt_match,
-	.restart	= lpc31xx_restart,
+	.restart	= arch_reset,
 MACHINE_END
 #endif
 #endif
diff --git a/arch/arm/mach-lpc31xx/dt.c b/arch/arm/mach-lpc31xx/dt.c
index 7c3d7cb..f4606bc 100644
--- a/arch/arm/mach-lpc31xx/dt.c
+++ b/arch/arm/mach-lpc31xx/dt.c
@@ -30,6 +30,7 @@
 #include <mach/board.h>
 #include <mach/clock.h>
 #include <mach/dt.h>
+#include <mach/system.h>
 
 static void __init lpc31xx_dt_init(void)
 {
@@ -48,11 +49,6 @@ void __init lpc31xx_init_early(void)
 printk("JDS - lpc31xx_init_early\n");
 }
 
-void lpc31xx_restart(char mode, const char *cmd)
-{
-printk("JDS - lpc31xx_restart\n");
-}
-
 static const char *lpc31xx_dt_match[] __initconst = {
 	"ncp,lpc3130",
 	"nxp,lpc3131",
@@ -68,5 +64,5 @@ DT_MACHINE_START(EA313X, "NXP LPC31xx (Device Tree Support)")
 	.timer		= &lpc313x_timer,
 	.init_machine	= lpc31xx_dt_init,
 	.dt_compat	= lpc31xx_dt_match,
-	.restart	= lpc31xx_restart,
+	.restart	= arch_reset,
 MACHINE_END
