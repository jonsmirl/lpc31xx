Bottom: 4ad22f1e526f42b1b13a14c003f49d09dff2106d
Top:    106a7e840a912ca03996e883b013627e287f24a8
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   2014-08-10 22:01:56 -0400

Refresh of tyler

---

diff --git a/arch/arm/boot/dts/sun7i-a20-cubietruck.dts b/arch/arm/boot/dts/sun7i-a20-cubietruck.dts
index e546055..6bfab05 100644
--- a/arch/arm/boot/dts/sun7i-a20-cubietruck.dts
+++ b/arch/arm/boot/dts/sun7i-a20-cubietruck.dts
@@ -193,6 +193,7 @@
 		};
 
 		simple-audio-card,codec {
+			clocks = <&iis0>;
 			sound-dai = <&sgtl5000>;
 		};
 	};
diff --git a/drivers/clk/clk.c b/drivers/clk/clk.c
index ca38548..f95590a 100644
--- a/drivers/clk/clk.c
+++ b/drivers/clk/clk.c
@@ -9,8 +9,6 @@
  * Standard functionality for the common clock API.  See Documentation/clk.txt
  */
 
-#define DEBUG
-
 #include <linux/clk-private.h>
 #include <linux/clk/clk-conf.h>
 #include <linux/module.h>
diff --git a/sound/soc/generic/simple-card.c b/sound/soc/generic/simple-card.c
index 05d074b..7b6edb6 100644
--- a/sound/soc/generic/simple-card.c
+++ b/sound/soc/generic/simple-card.c
@@ -147,6 +147,7 @@ asoc_simple_card_sub_parse_of(struct device_node *np,
 	 */
 	if (of_property_read_bool(np, "clocks")) {
 		clk = of_clk_get(np, 0);
+printk("JDS clk %p\n", clk);
 		if (IS_ERR(clk)) {
 			ret = PTR_ERR(clk);
 			return ret;
@@ -157,7 +158,9 @@ asoc_simple_card_sub_parse_of(struct device_node *np,
 		of_property_read_u32(np,
 				     "system-clock-frequency",
 				     &dai->sysclk);
-	} else {
+	} 
+/*
+else {
 		clkspec.np = node;
 		clk = of_clk_get_from_provider(&clkspec);
 
@@ -166,6 +169,8 @@ asoc_simple_card_sub_parse_of(struct device_node *np,
 			clk_put(clk);
 		}
 	}
+*/
+printk("JDS sysclk %d\n", dai->sysclk);
 	return 0;
 }
 
diff --git a/sound/soc/sunxi/sunxi-i2s.c b/sound/soc/sunxi/sunxi-i2s.c
index 1c9095c..296539e 100644
--- a/sound/soc/sunxi/sunxi-i2s.c
+++ b/sound/soc/sunxi/sunxi-i2s.c
@@ -319,9 +319,6 @@ static int sunxi_i2s_set_sysclk(struct snd_soc_dai *cpu_dai, int clk_id, unsigne
 
 	if ((freq == 24576000) || (freq == 22579200)) {
 		clk_set_rate(priv->clk_iis, freq);
-	} else {
-		dev_err(priv->dev, "rate must be 24576000 or 22579200, rate is %d\n", freq);
-		return -EINVAL;
 	}
 	return 0;
 }
